{"version":3,"sources":["components/UserList.tsx","components/AddUserForm.tsx","components/AppContainer.tsx","api/fetchClient.ts","api/users.api.ts","api/colors.api.ts","App.tsx","helpers.ts","index.tsx"],"names":["UserList","React","memo","users","map","user","ListItemButton","ListItemIcon","fontSize","style","color","carColor","name","ListItemText","primary","id","AddUserForm","colors","addUser","useState","setName","colorId","setColorId","isNameError","setIsNameError","isColorError","setIsColorError","isLoading","setIsLoading","selectedColor","find","c","onSubmit","a","window","alert","e","preventDefault","Divider","padding","display","alignItems","justifyContent","TextField","variant","label","width","value","onChange","target","error","disabled","Select","MenuItem","LoadingButton","type","loading","AppContainer","children","Paper","elevation","position","top","left","transform","Typography","textAlign","marginBottom","BASE_URL","process","request","url","delay","data","options","method","body","JSON","stringify","headers","Promise","resolve","setTimeout","then","fetch","response","ok","Error","json","client","usersApi","createValues","colorsApi","App","setUsers","setColoros","usersWithColors","useMemo","carColorId","prepareUsers","useEffect","useCallback","newUser","prev","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b3f7efc7.chunk.js","sourcesContent":["import React, { FC } from 'react';\nimport { ListItemButton, ListItemIcon, ListItemText } from '@mui/material';\nimport DirectionsCarFilledIcon from '@mui/icons-material/DirectionsCarFilled';\nimport { UserWithColor } from '../types';\n\ninterface Props {\n  users: UserWithColor[];\n}\n\nexport const UserList: FC<Props> = React.memo(({ users }) => {\n  return (\n    <>\n      {users.map(user => (\n        <ListItemButton key={user.id}>\n          <ListItemIcon>\n            <DirectionsCarFilledIcon fontSize=\"large\" style={{ color: user?.carColor?.name || 'black' }} />\n          </ListItemIcon>\n          <ListItemText primary={user.name} />\n        </ListItemButton>\n      ))}\n    </>\n  );\n});\n","import React, { FC, useState } from 'react';\nimport {\n  Divider, MenuItem, Select, TextField,\n} from '@mui/material';\nimport { LoadingButton } from '@mui/lab';\nimport { Color } from '../types';\n\ninterface Props {\n  colors: Color[];\n  addUser: (name: string, carColorId: number) => Promise<void>;\n}\n\nexport const AddUserForm: FC<Props> = React.memo(({ colors, addUser }) => {\n  const [name, setName] = useState('');\n  const [colorId, setColorId] = useState(0);\n  const [isNameError, setIsNameError] = useState(false);\n  const [isColorError, setIsColorError] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const selectedColor = colors.find(c => c.id === colorId);\n\n  const onSubmit = async () => {\n    if (!name || !colorId) {\n      setIsNameError(!name);\n      setIsColorError(!colorId);\n\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      await addUser(name, colorId);\n\n      setName('');\n      setColorId(0);\n    } catch (e) {\n      window.alert(e);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <form\n      onSubmit={e => {\n        e.preventDefault();\n        onSubmit();\n      }}\n    >\n      <Divider />\n\n      <div style={{\n        padding: '16px 0 16px', display: 'flex', alignItems: 'end', justifyContent: 'space-between',\n      }}\n      >\n        <TextField\n          variant=\"standard\"\n          label=\"Name\"\n          style={{ width: '45%' }}\n          value={name}\n          onChange={e => {\n            setName(e.target.value);\n            setIsNameError(false);\n          }}\n          error={isNameError}\n          disabled={isLoading}\n        />\n\n        <Select\n          label=\"Car color\"\n          style={{ width: '45%', color: selectedColor?.name || 'currentColor' }}\n          variant=\"standard\"\n          value={colorId}\n          onChange={e => {\n            setIsColorError(false);\n            setColorId(+e.target.value);\n          }}\n          error={isColorError}\n          disabled={isLoading}\n        >\n          <MenuItem value={0} disabled>\n            Color\n          </MenuItem>\n          {colors.map(color => (\n            <MenuItem\n              key={color.id}\n              style={{ color: color.name }}\n              value={color.id}\n            >\n              {color.name}\n            </MenuItem>\n          ))}\n        </Select>\n      </div>\n      <LoadingButton\n        type=\"submit\"\n        variant=\"outlined\"\n        style={{ width: '100%' }}\n        loading={isLoading}\n      >\n        Add new player\n      </LoadingButton>\n    </form>\n  );\n});\n","import React, { FC } from 'react';\nimport { Divider, Paper, Typography } from '@mui/material';\n\ninterface Props {\n  children: React.ReactNode\n}\n\nexport const AppContainer: FC<Props> = React.memo(({ children }) => {\n  return (\n    <Paper\n      elevation={10}\n      style={{\n        padding: '20px',\n        width: '30%',\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)',\n      }}\n    >\n      <Typography\n        variant=\"h2\"\n        style={{ textAlign: 'center', marginBottom: '16px' }}\n      >\n        Users`\n        board\n      </Typography>\n\n      {children}\n\n      <Divider />\n    </Paper>\n  );\n});\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nconst BASE_URL = process.env.REACT_APP_API_URL;\n\n// returns a promise resolved after a given delay\nfunction wait(delay: number) {\n  return new Promise(resolve => {\n    setTimeout(resolve, delay);\n  });\n}\n\n// To have autocompletion and avoid mistypes\ntype RequestMethod = 'GET' | 'POST' | 'PATCH' | 'DELETE';\n\nfunction request<T>(\n  url: string,\n  method: RequestMethod = 'GET',\n  data: any = null, // we can send any data to the server\n): Promise<T> {\n  const options: RequestInit = { method };\n\n  if (data) {\n    // We add body and Content-Type only for the requests with data\n    options.body = JSON.stringify(data);\n    options.headers = {\n      'Content-Type': 'application/json; charset=UTF-8',\n    };\n  }\n\n  // we wait for testing purpose to see loaders\n  return wait(300)\n    .then(() => fetch(BASE_URL + url, options))\n    .then(response => {\n      if (!response.ok) {\n        throw new Error();\n      }\n\n      return response.json();\n    });\n}\n\nexport const client = {\n  get: <T>(url: string) => request<T>(url),\n  post: <T>(url: string, data: any) => request<T>(url, 'POST', data),\n  patch: <T>(url: string, data: any) => request<T>(url, 'PATCH', data),\n  delete: (url: string) => request(url, 'DELETE'),\n};\n","import { client } from './fetchClient';\nimport { User } from '../types';\n\nconst get = () => client.get<User[]>('/users');\n\nconst create = (createValues: Pick<User, 'name' | 'carColorId'>) => {\n  return client.post<User>('/users', createValues);\n};\n\nexport const usersApi = {\n  get,\n  create,\n};\n","import { client } from './fetchClient';\nimport { Color } from '../types';\n\nconst get = () => client.get<Color[]>('/colors');\n\nexport const colorsApi = {\n  get,\n};\n","import React, {\n  useCallback, useEffect, useMemo, useState,\n} from 'react';\nimport './App.scss';\nimport { UserList } from './components/UserList';\nimport { AddUserForm } from './components/AddUserForm';\nimport { AppContainer } from './components/AppContainer';\nimport { Color, User } from './types';\nimport { prepareUsers } from './helpers';\nimport { usersApi } from './api/users.api';\nimport { colorsApi } from './api/colors.api';\n\nexport const App: React.FC = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [colors, setColoros] = useState<Color[]>([]);\n\n  const usersWithColors = useMemo(\n    () => prepareUsers(users, colors),\n    [users, colors],\n  );\n\n  useEffect(\n    () => {\n      usersApi.get().then(setUsers);\n      colorsApi.get().then(setColoros);\n    },\n    [],\n  );\n\n  const addUser = useCallback(async (name: string, carColorId: number) => {\n    const newUser = await usersApi.create({\n      name,\n      carColorId,\n    });\n\n    setUsers((prev) => [...prev, newUser]);\n  }, []);\n\n  return (\n    <AppContainer>\n      <UserList users={usersWithColors} />\n\n      <AddUserForm colors={colors} addUser={addUser} />\n    </AppContainer>\n  );\n};\n","import { Color, User } from './types';\n\nexport const prepareUsers = (users: User[], colors: Color[]) => {\n  return users.map(user => ({\n    ...user,\n    carColor: colors.find(color => color.id === user.carColorId),\n  }));\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport { App } from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}